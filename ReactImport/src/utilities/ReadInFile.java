/*
 * ReadInFile.java
 *
 * Created on January 22, 2001, 6:00 PM
 */

package utilities;

import java.io.*;
import javax.swing.JButton;


/**
 *
 * @author  reaction
 * @version 
 */
public class ReadInFile extends javax.swing.JPanel {

    boolean readIn = false;
    /** Creates new form ReadInFile */
    public ReadInFile() {
        initComponents ();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the FormEditor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        Read = new javax.swing.JButton();
        setLayout(new java.awt.BorderLayout());
        setPreferredSize(Read.getPreferredSize());
        setMinimumSize(getMinimumSize());
        setMaximumSize(getMaximumSize());
        
        Read.setPreferredSize(new java.awt.Dimension(200, 30));
        Read.setLabel("Read");
        Read.setBorder(new javax.swing.border.BevelBorder(0));
        Read.setMaximumSize(new java.awt.Dimension(1000, 200));
        Read.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        Read.setText(title);
        Read.setBackground(new java.awt.Color (0, 204, 204));
        Read.setMinimumSize(new java.awt.Dimension(200, 30));
        Read.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                ReadMousePressed(evt);
            }
        }
        );
        
        add(Read, java.awt.BorderLayout.NORTH);
        
    }//GEN-END:initComponents

  private void ReadMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ReadMousePressed
// Add your handling code here:
      FileFrame ff = new FileFrame();
      ff.setupButton(title,directory,pattern);
      ff.getFile();
      File chosenFile = ff.chosenFile;
      try {
        FileReader reader = new FileReader(chosenFile);
        StringBuffer tLine         = new StringBuffer();
        int bt;
        try {
            bt = reader.read();
            while(bt != -1) {
                    tLine.append((char) bt);
              bt = reader.read();
                if(bt == '\\')
                        bt = processConcat(reader);
                if(bt == '%')
                        bt = processComment(reader);
            }
        } catch (IOException io) { bt = -1; }
        output = tLine.toString();
        readIn = processOutput(output);
      } catch(IOException io) {
            System.out.println("File not found");
      }
      
  }//GEN-LAST:event_ReadMousePressed

  int processConcat(FileReader reader) {
      int n;
      try {
        n = reader.read();
        if(n == '\n')
            n = reader.read();
      } catch(IOException io) {
          n = -1;
      }
      return n;
  }
  
  int processComment(FileReader reader) {
      int n;
      try {
        n = reader.read();
        while(n != '\n') {
            n = reader.read();
            }
        } catch(IOException io) { n = '\n';}
        return n;
  }
  public void setupButton(java.lang.String t,java.lang.String pat,java.lang.String d) {
    directory = d;
    pattern = pat;
    title = t;
    Read.setText(title);
  }  

  public boolean processOutput(java.lang.String o) {
      return true;
  }
  
  public JButton getButton() {
      return Read;
  }
      
  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JButton Read;
  // End of variables declaration//GEN-END:variables

    public String directory;    

    public String pattern;
    
    public String title;
    
    public String output = new String("");
    
}
