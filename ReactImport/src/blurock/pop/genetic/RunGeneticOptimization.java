/*
 * RunGeneticOptimization.java
 *
 * Created on March 4, 2001, 7:09 PM
 */

package blurock.pop.genetic;
import blurock.core.*;
import react.common.TopReactionMenu;
import blurock.coreobjects.*;
import java.io.IOException;
import utilities.ErrorFrame;

/**
 *
 * @author  reaction
 * @version 
 */
public class RunGeneticOptimization extends javax.swing.JPanel {
    TopReactionMenu Top;
    /** Creates new form RunGeneticOptimization */
    public RunGeneticOptimization(TopReactionMenu top) {
        Top = top;
        initComponents ();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the FormEditor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        jPanel1 = new javax.swing.JPanel();
        directoryNameButton = new javax.swing.JButton();
        directoryName = new javax.swing.JTextField();
        readClassButton = new javax.swing.JButton();
        rootName = new javax.swing.JTextField();
        jPanel3 = new javax.swing.JPanel();
        jButton4 = new javax.swing.JButton();
        runOptimization = new javax.swing.JButton();
        mainPanel = new javax.swing.JPanel();
        OutputPanel = new javax.swing.JPanel();
        setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints1;
        
        jPanel1.setLayout(new java.awt.GridLayout(2, 2));
        jPanel1.setBorder(new javax.swing.border.TitledBorder("Input"));
        
        directoryNameButton.setToolTipText("Press to read in function file");
          directoryNameButton.setText("Directory");
          jPanel1.add(directoryNameButton);
          
          
        directoryName.setText(Top.SystemInfo.demoDirectory.getValue());
          jPanel1.add(directoryName);
          
          
        readClassButton.setText("File Root");
          jPanel1.add(readClassButton);
          
          
        rootName.setText("Test");
          jPanel1.add(rootName);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel1, gridBagConstraints1);
        
        
        
        jButton4.setText("Read Function");
          jButton4.addMouseListener(new java.awt.event.MouseAdapter() {
              public void mouseClicked(java.awt.event.MouseEvent evt) {
                  jButton4MouseClicked(evt);
              }
          }
          );
          jPanel3.add(jButton4);
          
          
        runOptimization.setText("Run Optimization");
          jPanel3.add(runOptimization);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel3, gridBagConstraints1);
        
        
        mainPanel.setPreferredSize(new java.awt.Dimension(400, 400));
        mainPanel.setBorder(new javax.swing.border.TitledBorder("Optimization"));
        
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(mainPanel, gridBagConstraints1);
        
        
        
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        add(OutputPanel, gridBagConstraints1);
        
    }//GEN-END:initComponents

  private void jButton4MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton4MouseClicked
// Add your handling code here:
        try {
        RegisteredClasses registered = new RegisteredClasses();
        ObjectDisplayManager man = new ObjectDisplayManager(registered);
        
        BaseDataSetOfObjects setofobjs = (BaseDataSetOfObjects) registered.BaseDataObjectExample();
        setofobjs.Name = "Attributes";
        DBaseDataSetOfObjects dsetofobjs = new DBaseDataSetOfObjects(man,setofobjs,registered);
        String inputfile = directoryName.getText() + "/" + rootName.getText();
            RWManager io = new RWManager(registered);
            String attrFile = new String(inputfile + ".inp");
            String clsFile  = new String(inputfile + "Class.inp");
            System.out.println("Read Class File");
            io.openInputFile(clsFile);
            registered.Read(io);
            io.closeInputFile();
            System.out.println("Read Attribute File");
            io.openInputFile(attrFile);
            setofobjs.Read(io,registered.classNamePairs);
            io.closeInputFile();
        
        ObjectAsTreeNode top = new ObjectAsTreeNode("Top Node");        
        dsetofobjs.objectAsSubTree(top);
        TopTreePanel tree = new TopTreePanel(top);
        mainPanel.removeAll();
        mainPanel.add(tree);
        mainPanel.updateUI();
    
        } catch(IOException exp) {
            ErrorFrame fr = new ErrorFrame("Problem with Reading File: \n" + exp.toString());
            fr.show();
        }
    
  }//GEN-LAST:event_jButton4MouseClicked


  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JPanel jPanel1;
  private javax.swing.JButton directoryNameButton;
  private javax.swing.JTextField directoryName;
  private javax.swing.JButton readClassButton;
  private javax.swing.JTextField rootName;
  private javax.swing.JPanel jPanel3;
  private javax.swing.JButton jButton4;
  private javax.swing.JButton runOptimization;
  private javax.swing.JPanel mainPanel;
  private javax.swing.JPanel OutputPanel;
  // End of variables declaration//GEN-END:variables

}
