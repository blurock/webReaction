/*
 * InstanceSets.java
 *
 * Created on February 15, 2001, 7:37 PM
 */

package blurock.instattr;
import react.common.TopReactionMenu;
import blurock.utilities.*;
import blurock.core.RunAlgorithm;

/**
 *
 * @author  reaction
 * @version 
 */
public class InstanceSets extends javax.swing.JPanel {

    TopReactionMenu Top;    
    /** Creates new form InstanceSets */
    public InstanceSets(TopReactionMenu top) {
        Top = top;
        initComponents ();
        trainInstanceSet.setVisible(true);
        testInstanceSet.setVisible(true);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the FormEditor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        controlPanel = new java.awt.Panel();
        controlButtonPanel = new javax.swing.JPanel();
        updateButton = new javax.swing.JButton();
        setPercentageButton = new javax.swing.JButton();
        namePanel = new javax.swing.JPanel();
        instantSetNameLabel = new javax.swing.JLabel();
        instanceNameTextField = new javax.swing.JTextField();
        testPercentageSlider = new javax.swing.JSlider();
        selectionPanel = new javax.swing.JPanel();
        setSelectedButton = new javax.swing.JButton();
        trainSetVisible = new javax.swing.JRadioButton();
        testSetVisible = new javax.swing.JRadioButton();
        instanceListPanel = new java.awt.Panel();
        totalInstanceSet = new react.utilities.StandardListPanel();
        trainInstanceSet = new react.utilities.StandardListPanel();
        testInstanceSet = new react.utilities.StandardListPanel();

        setLayout(new java.awt.BorderLayout());

        controlPanel.setLayout(new java.awt.BorderLayout());

        controlPanel.setBackground(new java.awt.Color(204, 204, 204));
        controlPanel.setFont(new java.awt.Font("Dialog", 0, 11));
        controlPanel.setForeground(java.awt.Color.black);
        controlButtonPanel.setLayout(new java.awt.GridLayout(1, 3));

        updateButton.setText("Update");
        updateButton.setToolTipText("Update the total instance list");
        updateButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                updateTotalList(evt);
            }
        });

        controlButtonPanel.add(updateButton);

        setPercentageButton.setText("Set Percentage");
        setPercentageButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                setPercentage(evt);
            }
        });

        controlButtonPanel.add(setPercentageButton);

        namePanel.setLayout(new java.awt.GridLayout(1, 2));

        instantSetNameLabel.setText("Instance Set Name");
        namePanel.add(instantSetNameLabel);

        instanceNameTextField.setText("InstanceSet");
        namePanel.add(instanceNameTextField);

        controlButtonPanel.add(namePanel);

        controlPanel.add(controlButtonPanel, java.awt.BorderLayout.NORTH);

        testPercentageSlider.setMajorTickSpacing(10);
        testPercentageSlider.setMinorTickSpacing(2);
        testPercentageSlider.setPaintLabels(true);
        testPercentageSlider.setPaintTicks(true);
        testPercentageSlider.setToolTipText("Training set percentage of Total Instance Set");
        testPercentageSlider.setValue(90);
        testPercentageSlider.setPreferredSize(new java.awt.Dimension(250, 39));
        controlPanel.add(testPercentageSlider, java.awt.BorderLayout.CENTER);

        selectionPanel.setLayout(new java.awt.GridLayout(1, 3));

        setSelectedButton.setText("Set Selected");
        setSelectedButton.setToolTipText("Set selected Instances to Training Set");
        setSelectedButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                setSelected(evt);
            }
        });

        selectionPanel.add(setSelectedButton);

        trainSetVisible.setSelected(true);
        trainSetVisible.setText("Train Set");
        trainSetVisible.setToolTipText("Training Set will be set to Selected (if Set Select)");
        trainSetVisible.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                trainSetVisibleMouseClicked(evt);
            }
        });

        selectionPanel.add(trainSetVisible);

        testSetVisible.setText("Test Set");
        testSetVisible.setToolTipText("Test Set will be set to selected (if Set Selected)");
        testSetVisible.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                testSetVisibleMouseClicked(evt);
            }
        });

        selectionPanel.add(testSetVisible);

        controlPanel.add(selectionPanel, java.awt.BorderLayout.SOUTH);

        add(controlPanel, java.awt.BorderLayout.NORTH);

        instanceListPanel.setLayout(new java.awt.GridLayout(1, 3));

        instanceListPanel.setBackground(new java.awt.Color(204, 204, 204));
        instanceListPanel.setFont(new java.awt.Font("Dialog", 0, 11));
        instanceListPanel.setForeground(java.awt.Color.black);
        totalInstanceSet.setLayout(new java.awt.FlowLayout());

        totalInstanceSet.setBorder(new javax.swing.border.TitledBorder("Total Set of Instances"));
        instanceListPanel.add(totalInstanceSet);

        trainInstanceSet.setLayout(new java.awt.FlowLayout());

        trainInstanceSet.setBorder(new javax.swing.border.TitledBorder("Training Set"));
        instanceListPanel.add(trainInstanceSet);

        testInstanceSet.setLayout(new java.awt.FlowLayout());

        testInstanceSet.setBorder(new javax.swing.border.TitledBorder("Test Set"));
        instanceListPanel.add(testInstanceSet);

        add(instanceListPanel, java.awt.BorderLayout.CENTER);

    }
    // </editor-fold>//GEN-END:initComponents

  private void testSetVisibleMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_testSetVisibleMouseClicked
// Add your handling code here:
            trainSetVisible.setSelected(!testSetVisible.isSelected());
            visibleLists();
  }//GEN-LAST:event_testSetVisibleMouseClicked

  private void trainSetVisibleMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_trainSetVisibleMouseClicked
// Add your handling code here:
            testSetVisible.setSelected(!trainSetVisible.isSelected());
            visibleLists();
  }//GEN-LAST:event_trainSetVisibleMouseClicked
  private void visibleLists() {
        testInstanceSet.setVisible(true);
        trainInstanceSet.setVisible(true);
      /*
      if(trainSetVisible.isSelected()) {
        trainInstanceSet.setVisible(true);
        testInstanceSet.setVisible(false);
      } else {
        testInstanceSet.setVisible(true);
        trainInstanceSet.setVisible(false);
      }
       **/
  }
      
  private void updateTotalList(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_updateTotalList
    update();

  }//GEN-LAST:event_updateTotalList

  private void setSelected(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_setSelected
    setSelected();

  }//GEN-LAST:event_setSelected

  private void setPercentage(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_setPercentage
        setPercentage();

  }//GEN-LAST:event_setPercentage
protected void update() {
      String command = Top.SystemCommands.InstanceList.getValue();
      GetSystemLists param = new GetSystemLists(Top);
      instanceList = param.getInstanceList();
      totalInstanceSet.setData(instanceList);
}
  protected void setSelected() {
          SetUpClassAttrFile fls = new SetUpClassAttrFile(Top,instanceNameTextField.getText(),
                    "Set the training and test sets to the selected elements");
          
      setSelectedSetup(fls);
  }
  protected void setSelectedSetup(SetUpClassAttrFile fls) {
      
      String[] names = totalInstanceSet.selectedItemsToString(true);
      
      fls.printKeyWords(Top.SystemParameters.instanceNameList.getValue(),
                        instanceList);
      fls.printKeyWords(Top.SystemParameters.totalInstanceList.getValue(),
                        instanceList);
      if(trainSetVisible.isSelected()) {
        fls.printKeyWords(Top.SystemParameters.trainInstanceList.getValue(),
                            names);
      trainInstanceSet.setData(names);
      }
      if(testSetVisible.isSelected()) {
        fls.printKeyWords(Top.SystemParameters.testInstanceList.getValue(),
                            names);
      testInstanceSet.setData(names);
      }
      fls.read(false);
}
  protected void setPercentage() {
      SetUpClassAttrFile fls = new SetUpClassAttrFile(Top,instanceNameTextField.getText(),
                    "Set the training and test sets to the selected elements");
      
      String[] names = totalInstanceSet.selectedItemsToString(true);
      fls.printKeyWords(Top.SystemParameters.instanceNameList.getValue(),
                        names);
      double testpercent = (double) testPercentageSlider.getValue();
      fls.printReal(Top.SystemParameters.testPercentage.getValue(),100.0 - testpercent);
      fls.read(false);
      RunAlgorithm runit = new RunAlgorithm(Top,
                    Top.SystemAlgorithms.instanceSetup.getValue(),false);
      runit.run();
      GetSystemLists getlist = new GetSystemLists(Top);
      String[]  train = getlist.getSystemList(Top.SystemParameters.trainInstanceList.getValue());
      System.out.println("Training Set Size: " + train.length);
      trainInstanceSet.setData(train);
      String[]  test = getlist.getSystemList(Top.SystemParameters.testInstanceList.getValue());
      System.out.println("Test Set Size: " + test.length);
      testInstanceSet.setData(test);    
}
  
  protected String[] instanceList;

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel controlButtonPanel;
    private java.awt.Panel controlPanel;
    private java.awt.Panel instanceListPanel;
    protected javax.swing.JTextField instanceNameTextField;
    private javax.swing.JLabel instantSetNameLabel;
    private javax.swing.JPanel namePanel;
    private javax.swing.JPanel selectionPanel;
    private javax.swing.JButton setPercentageButton;
    private javax.swing.JButton setSelectedButton;
    public react.utilities.StandardListPanel testInstanceSet;
    protected javax.swing.JSlider testPercentageSlider;
    protected javax.swing.JRadioButton testSetVisible;
    public react.utilities.StandardListPanel totalInstanceSet;
    public react.utilities.StandardListPanel trainInstanceSet;
    protected javax.swing.JRadioButton trainSetVisible;
    private javax.swing.JButton updateButton;
    // End of variables declaration//GEN-END:variables

}
