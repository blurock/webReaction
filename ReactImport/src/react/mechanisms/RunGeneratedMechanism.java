/*
 * RunGeneratedMechanism.java
 *
 * Created on May 29, 2001, 11:24 AM
 */

package react.mechanisms;
import java.io.*;
import utilities.OutputFrame;


/**
 *
 * @author  reaction
 * @version 
 */
public class RunGeneratedMechanism extends javax.swing.JPanel {

    String thermoOutputFile = "THERMDAT.txt";
    String rxnOutputFile = "MECIN.txt";
    String molOutputFile = "SPECIES_LIST.txt";
    /** Creates new form RunGeneratedMechanism */
    public RunGeneratedMechanism() {
        initComponents ();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the FormEditor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jTextField3 = new javax.swing.JTextField();
        jPanel1 = new javax.swing.JPanel();
        thermoBaseFileButton = new javax.swing.JButton();
        thermoBaseFileName = new javax.swing.JTextField();
        useDefaultGenThermo = new javax.swing.JRadioButton();
        generatedThermo = new javax.swing.JTextField();
        jPanel3 = new javax.swing.JPanel();
        baseRxnButton = new javax.swing.JButton();
        baseRxnsFileName = new javax.swing.JTextField();
        useDefaultGenRxns = new javax.swing.JRadioButton();
        generatedRxns = new javax.swing.JTextField();
        jPanel4 = new javax.swing.JPanel();
        baseMolButton = new javax.swing.JButton();
        baseMoleculesFileName = new javax.swing.JTextField();
        useDefaultGenMols = new javax.swing.JRadioButton();
        generatedMolecules = new javax.swing.JTextField();
        jPanel5 = new javax.swing.JPanel();
        runPreprocessor = new javax.swing.JButton();
        runMechanism = new javax.swing.JButton();
        setLayout(new java.awt.GridBagLayout());
        java.awt.GridBagConstraints gridBagConstraints1;
        
        jPanel2.setLayout(new java.awt.GridLayout(1, 2));
        jPanel2.setBorder(new javax.swing.border.TitledBorder("Generated"));
        
        jLabel1.setText("Root Name");
          jPanel2.add(jLabel1);
          
          
        jTextField3.setToolTipText("The root name of the generated files");
          jTextField3.setText("Test");
          jPanel2.add(jTextField3);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel2, gridBagConstraints1);
        
        
        jPanel1.setLayout(new java.awt.GridLayout(1, 4));
        jPanel1.setBorder(new javax.swing.border.TitledBorder("Thermodynamics"));
        
        thermoBaseFileButton.setText("Base Thermo File");
          jPanel1.add(thermoBaseFileButton);
          
          
        thermoBaseFileName.setText("THERMDAT.base");
          jPanel1.add(thermoBaseFileName);
          
          
        useDefaultGenThermo.setSelected(true);
          useDefaultGenThermo.setText("Use Default Generated");
          jPanel1.add(useDefaultGenThermo);
          
          
        generatedThermo.setText("Test.thm");
          jPanel1.add(generatedThermo);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel1, gridBagConstraints1);
        
        
        jPanel3.setLayout(new java.awt.GridLayout(1, 4));
        jPanel3.setBorder(new javax.swing.border.TitledBorder("Reactions"));
        
        baseRxnButton.setText("Base Mechanism");
          jPanel3.add(baseRxnButton);
          
          
        baseRxnsFileName.setText("MECIN.base");
          jPanel3.add(baseRxnsFileName);
          
          
        useDefaultGenRxns.setSelected(true);
          useDefaultGenRxns.setText("Use Default Generated");
          jPanel3.add(useDefaultGenRxns);
          
          
        generatedRxns.setText("Test.mech");
          jPanel3.add(generatedRxns);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel3, gridBagConstraints1);
        
        
        jPanel4.setLayout(new java.awt.GridLayout(1, 4));
        jPanel4.setBorder(new javax.swing.border.TitledBorder("Molecules"));
        
        baseMolButton.setText("Base Molecules");
          jPanel4.add(baseMolButton);
          
          
        baseMoleculesFileName.setText("SPECIES_LIST.base");
          jPanel4.add(baseMoleculesFileName);
          
          
        useDefaultGenMols.setSelected(true);
          useDefaultGenMols.setText("Use Default Generated");
          jPanel4.add(useDefaultGenMols);
          
          
        generatedMolecules.setText("Test.species");
          jPanel4.add(generatedMolecules);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        gridBagConstraints1.gridwidth = 0;
        gridBagConstraints1.fill = java.awt.GridBagConstraints.HORIZONTAL;
        add(jPanel4, gridBagConstraints1);
        
        
        jPanel5.setLayout(new java.awt.GridLayout(1, 2));
        
        runPreprocessor.setText("Run Mechanism");
          runPreprocessor.addMouseListener(new java.awt.event.MouseAdapter() {
              public void mouseClicked(java.awt.event.MouseEvent evt) {
                  runPreprocessorMouseClicked(evt);
              }
          }
          );
          jPanel5.add(runPreprocessor);
          
          
        runMechanism.setText("jButton6");
          jPanel5.add(runMechanism);
          
          
        gridBagConstraints1 = new java.awt.GridBagConstraints();
        add(jPanel5, gridBagConstraints1);
        
    }//GEN-END:initComponents

  private void runPreprocessorMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_runPreprocessorMouseClicked
// Add your handling code here:
      try {
      generateInputFiles();
      String output = runMechanism();
      OutputFrame fr = new OutputFrame(output);
      fr.show();
      } catch(IOException io) {
          System.out.println("Error in generating input files");
      }
  }//GEN-LAST:event_runPreprocessorMouseClicked
  private void generateInputFiles() throws IOException {
    generateThermoInput();
    generateRxnInput();
    generateMolInput();
  }
  private void generateThermoInput() throws IOException {
      String baseThermo = thermoBaseFileName.getText();
      String genThermo  = generatedThermo.getText();
      FileWriter outputfile = new FileWriter(thermoOutputFile);
      addFileToOutput(baseThermo,outputfile);
      addFileToOutput(genThermo,outputfile);
      outputfile.write("\nEND\n");
      
      outputfile.close();
  }
  private void generateRxnInput() throws IOException {
      String baseRxn = baseRxnsFileName.getText();
      String genRxn  = generatedRxns.getText();
      FileWriter outputfile = new FileWriter(rxnOutputFile);
      outputfile.write("% ------ Generated Mechanism File \ninput = \"");
      outputfile.write(genRxn);
      outputfile.write("\"\n% --------------------------------------------");
      
      addFileToOutput(baseRxn,outputfile);
      
      outputfile.close();
  }
  private void generateMolInput() throws IOException {
      String baseMol = baseMoleculesFileName.getText();
      String genMol  = generatedMolecules.getText();
      FileWriter outputfile = new FileWriter(molOutputFile);
      
      addFileToOutput(baseMol,outputfile);
      addFileToOutput(genMol,outputfile);
      outputfile.write("END_OF_LIST OF SPECIES SYMBOLS\n");
      
      outputfile.close();
  }
  private void addFileToOutput(String filename, FileWriter outputfile) {
      int bt;
      try {
      FileReader basefile = new FileReader(filename);
        bt = basefile.read();
        while(bt != -1) {
          outputfile.write(bt);
          bt = basefile.read();
          }
      } catch (IOException io) { 
                bt = -1; }
      
  }
  private String runMechanism() {
      return new String("rumMechanism");
  }

  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JPanel jPanel2;
  private javax.swing.JLabel jLabel1;
  private javax.swing.JTextField jTextField3;
  private javax.swing.JPanel jPanel1;
  private javax.swing.JButton thermoBaseFileButton;
  private javax.swing.JTextField thermoBaseFileName;
  private javax.swing.JRadioButton useDefaultGenThermo;
  private javax.swing.JTextField generatedThermo;
  private javax.swing.JPanel jPanel3;
  private javax.swing.JButton baseRxnButton;
  private javax.swing.JTextField baseRxnsFileName;
  private javax.swing.JRadioButton useDefaultGenRxns;
  private javax.swing.JTextField generatedRxns;
  private javax.swing.JPanel jPanel4;
  private javax.swing.JButton baseMolButton;
  private javax.swing.JTextField baseMoleculesFileName;
  private javax.swing.JRadioButton useDefaultGenMols;
  private javax.swing.JTextField generatedMolecules;
  private javax.swing.JPanel jPanel5;
  private javax.swing.JButton runPreprocessor;
  private javax.swing.JButton runMechanism;
  // End of variables declaration//GEN-END:variables

}
